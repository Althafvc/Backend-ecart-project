<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- CDN -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<!-- CDN -->
</head>
<body>
    <!-- include header -->
    <header>
      <!DOCTYPE html>
      <html lang="en">
      
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <!-- Font Awesome -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
        <!-- MDB -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.2/mdb.min.css" rel="stylesheet"/>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <link rel="stylesheet" href="/styles/userEdit.css">
        <link rel="stylesheet" href="/styles/userlogin.css">
        <style>
          .otp-field {
            flex-direction: row;
            column-gap: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
          }
      
          .otp-field input {
            height: 45px;
            width: 42px;
            border-radius: 6px;
            outline: none;
            font-size: 1.125rem;
            text-align: center;
            border: 1px solid #ddd;
          }
      
          .otp-field input:focus {
            box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);
          }
      
          .otp-field input::-webkit-inner-spin-button,
          .otp-field input::-webkit-outer-spin-button {
            display: none;
          }
      
          .resend {
            font-size: 12px;
          }
          .red{
            color: red!important;
          }
        </style>
      </head>
      
      <body style="background-color: ghostwhite">
        <!--Main Navigation-->
        <header>
          <!-- Jumbotron -->
          <div class="p-3 text-center bg-white border-bottom" style="background-color: #fff !important">
            <div class="container">
              <div class="row gy-3">
                <!-- Left elements -->
                <div class="col-lg-2 col-sm-4 col-4">
                  <a href="/"  class="float-start" style="color: #000; font-size:22px; font-weight: bolder;">
                    <!-- <img src="images/logo.png" width="100" height="50"/> -->
                    <p style="color: #000;">Stylesphere</p>
                  </a>
                </div>
                <!-- Left elements -->
      
                <!-- Center elements -->
                
                <!-- Center elements -->  
      
                <!-- Right elements -->
                
                <!-- Right elements -->
              </div>
            </div>
          </div>
          <!-- Jumbotron -->
      
          <!-- Navbar -->
      
          <!-- Navbar -->
          <!-- Jumbotron --> 
      </header>
<!-- /include header -->



<section class=" my-5" style="background-color:#f5f5f7;">
    <div class="container">
        <div class="row">
            <h5>Your Orders</h5>
            
            <div class="col-lg-12">
              <% orderDatas.orders.forEach((data) =>{ %>

                <div class="card mb-4">
                    <div class="card-body">
                        <p style="font-size: 12px;" class="card-title">Order ID: <span
                                style="font-weight: bold;"><%=data._id%></span></p>
                        <div class="row gy-3 mb-2" style="cursor: pointer;">
                            <div class="col-2" onclick="orderDetails()">
                                <img src="/uploads/products<%=data.productId.product_img[0]%>" class="img-fluid" alt="" />
                            </div>
                            <div onclick="orderDetails()"
                                class="col-8 d-flex flex-column align-items-start d-flex justify-content-center">
                                <h6 class="card-subtitle mb-2 text-muted text-center">
                                </h6>
                                <p class="card-text text-muted text-center">
                                </p>
                                <span style="font-weight: 500; color: #28a745;">âœ“ Delivered</span>
                            </div>
                            <div class="col-2 d-flex align-items-center">
                                <button class="btn btn-primary me-auto" onclick="openCancelConfirmationModal()">cancel</button>
                                <button class="btn btn-danger me-md-3">Cancelled</button>
                            </div>
                        </div>
                    </div>
                </div>
                <% }) %>
                <p>You have no previous orders</p>
            </div>
        </div>
    </div>

</section>

<!-- Modal for cancel confirmation -->
<div class="modal fade" id="cancelConfirmationModal" tabindex="-1" role="dialog"
    aria-labelledby="cancelConfirmationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="cancelConfirmationModalLabel">Confirm Cancellation</h5>
            </div>
            <div class="modal-body">
                Are you sure you want to cancel this order?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="confirmCancelBtn">Confirm Cancellation</button>
            </div>
        </div>
    </div>
</div>
</section>
<!-- <script>
        function openCancelConfirmationModal(orderId) {
            // Set the orderId in the modal for reference
            document.getElementById('confirmCancelBtn').setAttribute('data-order-id', orderId);

            // Open the modal
            $('#cancelConfirmationModal').modal('show');
        }

        // Attach a click event to the Confirm Cancelation button inside the modal
        document.getElementById('confirmCancelBtn').addEventListener('click', function () {
            // Retrieve the orderId from the data attribute
            const orderId = this.getAttribute('data-order-id');

            // Redirect to the cancel-product route with the orderId
            window.location.href = /cancel-order?id=${orderId};
        });


 
    </script> -->





<!-- // <script> -->
<!-- //     function cancelProduct(orderId) {
    //         window.location.href = /cancel-order?id=${orderId};
    //     }
    //     function orderDetails(orderId) {
    //         window.location.href = /order-details?id=${orderId};
    //     }
    // </script>
 
    // <!-- include footer -->
// <!-- /include footer -->

</body>
</html>